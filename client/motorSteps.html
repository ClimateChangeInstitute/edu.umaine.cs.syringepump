<!-- Controls to directly step the motor in a direction -->
<div>
	<div class="col-xs-12 col-sm-2">
		<button id="motorStepBackward" type="button"
			class="btn btn-default col-xs-12" title="-2000 steps">
			<span class="glyphicon glyphicon-step-backward"></span>
		</button>
	</div>
	<div class="col-xs-12 col-sm-2">
		<button id="motorFastBackward" type="button"
			class="btn btn-default col-xs-12" title="-1000 steps">
			<span class="glyphicon glyphicon-fast-backward"></span>
		</button>
	</div>
	<div class="col-xs-12 col-sm-1">
		<button id="motorBackward" type="button"
			class="btn btn-default col-xs-12" title="-100 steps">
			<span class="glyphicon glyphicon-backward"></span>
		</button>
	</div>
	<div class="col-xs-12 col-sm-2">
		<button id="motorReset" type="button" class="btn btn-default col-xs-12"
			title="Reset home position">
			<span class="glyphicon glyphicon-refresh"></span>
		</button>
	</div>
	<div class="col-xs-12 col-sm-1">
		<button id="motorForward" type="button"
			class="btn btn-default col-xs-12" title="100 steps">
			<span class="glyphicon glyphicon-forward"></span>
		</button>
	</div>
	<div class="col-xs-12 col-sm-2">
		<button id="motorFastForward" type="button"
			class="btn btn-default col-xs-12" title="1000 steps">
			<span class="glyphicon glyphicon-fast-forward"></span>
		</button>
	</div>
	<div class="col-xs-12 col-sm-2">
		<button id="motorStepForward" type="button"
			class="btn btn-default col-xs-12" title="2000 steps">
			<span class="glyphicon glyphicon-step-forward"></span>
		</button>
	</div>
	<script type="text/javascript">
		$(document).ready(function() {

			var initStepButton = function(buttonName, loadSteps) {
				// Initialize the load button click event
				$('#' + buttonName).click(function(event) {
					// time should be in milliseconds
					$.ajax({
						method : "POST",
						url : "moveSteps",
						data : {
							steps : loadSteps,
							time_ms : Math.abs(loadSteps * 5)
						},
						success : function(data) {

							sp.displayMessage("Moving motor " + loadSteps + " steps", 'info');

							var result = $.parseJSON(data);

							var min = result.start;
							var max = result.end;
							if (result.end < result.start) {
								min = result.end;
								max = result.start;
							}

							console.log(min + " " + max);

							sp.checkLevels(300, min, max,
									result.start < result.end, "steps");
							
						},
						error : function(msg) {
							console.log('Failed to move motor!');
						}
					});

				});
			};

			initStepButton("motorStepBackward", -2000);
			initStepButton("motorFastBackward", -1000);
			initStepButton("motorBackward", -100);
			initStepButton("motorForward", 100);
			initStepButton("motorFastForward", 1000);
			initStepButton("motorStepForward", 2000);

			$('#motorReset').click(function(event) {
				// time should be in milliseconds
				$.ajax({
					method : "POST",
					url : "reset",
					data : { /* No Data */
					},
					success : function(data) {
						sp.displayMessage("Motor position reset to 0.", 'info');
					},
					error : function(msg) {
						console.log('Failed to reset');
					}
				});

			});

		});
	</script>
</div>